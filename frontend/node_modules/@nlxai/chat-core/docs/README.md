# @nlxai/chat-core

## Interfaces

- [SlotValue](interfaces/SlotValue.md)
- [BotResponse](interfaces/BotResponse.md)
- [BotResponsePayload](interfaces/BotResponsePayload.md)
- [BotResponseMetadata](interfaces/BotResponseMetadata.md)
- [BotMessageMetadata](interfaces/BotMessageMetadata.md)
- [BotMessage](interfaces/BotMessage.md)
- [Choice](interfaces/Choice.md)
- [UserResponse](interfaces/UserResponse.md)
- [FailureMessage](interfaces/FailureMessage.md)
- [Config](interfaces/Config.md)
- [StructuredRequest](interfaces/StructuredRequest.md)
- [ChoiceRequestMetadata](interfaces/ChoiceRequestMetadata.md)
- [ConversationHandler](interfaces/ConversationHandler.md)

## Type Aliases

### Context

Ƭ **Context**: `Record`\<`string`, `any`\>

[Context](https://docs.studio.nlx.ai/workspacesettings/documentation-settings/settings-context-attributes) for usage later in the intent.

#### Defined in

[index.ts:13](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L13)

___

### SlotsRecord

Ƭ **SlotsRecord**: `Record`\<`string`, `any`\>

Values to fill an intent's [attached slots](https://docs.studio.nlx.ai/intents/documentation-intents/intents-attached-slots).

`SlotRecord` Keys are the attached slot's name

`SlotRecord` Values are usually a discrete value matching the slots's [type](https://docs.studio.nlx.ai/slots/documentation-slots/slots-values#system-slots).
for custom slots, this can optionally be the value's ID.

A `SlotsRecord` is equivalent to an array of [SlotValue](interfaces/SlotValue.md) objects.

#### Defined in

[index.ts:42](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L42)

___

### SlotsRecordOrArray

Ƭ **SlotsRecordOrArray**: [`SlotsRecord`](README.md#slotsrecord) \| [`SlotValue`](interfaces/SlotValue.md)[]

Values to fill an intent's [attached slots](https://docs.studio.nlx.ai/intents/documentation-intents/intents-attached-slots).

Supports either a [SlotsRecord](README.md#slotsrecord) or an array of [SlotValue](interfaces/SlotValue.md) objects

#### Defined in

[index.ts:49](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L49)

___

### UserResponsePayload

Ƭ **UserResponsePayload**: \{ `type`: ``"text"`` ; `text`: `string` ; `context?`: [`Context`](README.md#context)  } \| \{ `type`: ``"choice"`` ; `choiceId`: `string` ; `context?`: [`Context`](README.md#context)  } \| \{ `type`: ``"structured"`` ; `context?`: [`Context`](README.md#context)  } & [`StructuredRequest`](interfaces/StructuredRequest.md)

The payload of the user response

#### Defined in

[index.ts:224](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L224)

___

### Response

Ƭ **Response**: [`BotResponse`](interfaces/BotResponse.md) \| [`UserResponse`](interfaces/UserResponse.md) \| [`FailureMessage`](interfaces/FailureMessage.md)

A response from the bot or the user.

#### Defined in

[index.ts:293](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L293)

___

### Time

Ƭ **Time**: `number`

The time value in milliseconds since midnight, January 1, 1970 UTC.

#### Defined in

[index.ts:298](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L298)

___

### Subscriber

Ƭ **Subscriber**: (`response`: [`Response`](README.md#response)[], `newResponse?`: [`Response`](README.md#response)) => `void`

The callback function for listening to all responses.

#### Type declaration

▸ (`response`, `newResponse?`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `response` | [`Response`](README.md#response)[] |
| `newResponse?` | [`Response`](README.md#response) |

##### Returns

`void`

#### Defined in

[index.ts:552](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L552)

## Functions

### shouldReinitialize

▸ **shouldReinitialize**(`config1`, `config2`): `boolean`

Helper method to decide when a new [Config](interfaces/Config.md) requires creating a new [ConversationHandler](interfaces/ConversationHandler.md) or whether the old `Config`'s
`ConversationHandler` can be used.

The order of configs doesn't matter.

#### Parameters

| Name | Type |
| :------ | :------ |
| `config1` | [`Config`](interfaces/Config.md) |
| `config2` | [`Config`](interfaces/Config.md) |

#### Returns

`boolean`

true if `createConversation` should be called again

#### Defined in

[index.ts:563](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L563)

___

### default

▸ **default**(`config`): [`ConversationHandler`](interfaces/ConversationHandler.md)

Call this to create a conversation handler.

#### Parameters

| Name | Type |
| :------ | :------ |
| `config` | [`Config`](interfaces/Config.md) |

#### Returns

[`ConversationHandler`](interfaces/ConversationHandler.md)

The [ConversationHandler](interfaces/ConversationHandler.md) is a bundle of functions to interact with the conversation.

#### Defined in

[index.ts:575](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L575)

___

### promisify

▸ **promisify**\<`T`\>(`fn`, `convo`, `timeout?`): (`payload`: `T`) => `Promise`\<[`Response`](README.md#response) \| ``null``\>

This package is intentionally designed with a subscription-based API as opposed to a promise-based one where each message corresponds to a single bot response, available asynchronously.

If you need a promise-based wrapper, you can use the `promisify` helper available in the package:

#### Type parameters

| Name | Description |
| :------ | :------ |
| `T` | the type of the function's params, e.g. for `sendText` it's `text: string, context?: Context` |

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `fn` | (`payload`: `T`) => `void` | `undefined` | the function to wrap (e.g. `convo.sendText`, `convo.sendChoice`, etc.) |
| `convo` | [`ConversationHandler`](interfaces/ConversationHandler.md) | `undefined` | the `ConversationHandler` (from [createConversation](README.md#default)) |
| `timeout` | `number` | `10000` | the timeout in milliseconds |

#### Returns

`fn`

A promise-wrapped version of the function. The function, when called, returns a promise that resolves to the Conversation's next response.

▸ (`payload`): `Promise`\<[`Response`](README.md#response) \| ``null``\>

##### Parameters

| Name | Type |
| :------ | :------ |
| `payload` | `T` |

##### Returns

`Promise`\<[`Response`](README.md#response) \| ``null``\>

**`Example`**

```typescript
import { createConversation, promisify } from "@nlxai/chat-core";

const convo = createConversation(config);

const sendTextWrapped = promisify(convo.sendText, convo);

sendTextWrapped("Hello").then((response) => {
  console.log(response);
});
```

#### Defined in

[index.ts:969](https://github.com/nlxai/sdk/blob/71307264e396822939eca86ed156fc2cc45d48d3/packages/chat-core/src/index.ts#L969)
